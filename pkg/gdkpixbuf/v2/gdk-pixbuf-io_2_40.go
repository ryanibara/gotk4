// Code generated by girgen. DO NOT EDIT.

package gdkpixbuf

import (
	"runtime"
	"unsafe"

	"github.com/diamondburned/gotk4/pkg/core/gerror"
)

// #include <stdlib.h>
// #include <gdk-pixbuf/gdk-pixbuf.h>
import "C"

// PixbufInitModules initalizes the gdk-pixbuf loader modules referenced by the
// loaders.cache file present inside that directory.
//
// This is to be used by applications that want to ship certain loaders in a
// different location from the system ones.
//
// This is needed when the OS or runtime ships a minimal number of loaders so as
// to reduce the potential attack surface of carefully crafted image files,
// especially for uncommon file types. Applications that require broader image
// file types coverage, such as image viewers, would be expected to ship the
// gdk-pixbuf modules in a separate location, bundled with the application in a
// separate directory from the OS or runtime- provided modules.
//
// The function takes the following parameters:
//
//    - path: path to directory where the loaders.cache is installed.
//
func PixbufInitModules(path string) error {
	var _arg1 *C.char   // out
	var _cerr *C.GError // in

	_arg1 = (*C.char)(unsafe.Pointer(C.CString(path)))
	defer C.free(unsafe.Pointer(_arg1))

	C.gdk_pixbuf_init_modules(_arg1, &_cerr)
	runtime.KeepAlive(path)

	var _goerr error // out

	if _cerr != nil {
		_goerr = gerror.Take(unsafe.Pointer(_cerr))
	}

	return _goerr
}
