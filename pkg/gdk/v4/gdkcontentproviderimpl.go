// Code generated by girgen. DO NOT EDIT.

package gdk

import (
	"runtime"
	"unsafe"

	"github.com/diamondburned/gotk4/pkg/core/gextras"
	"github.com/diamondburned/gotk4/pkg/core/girepository"
	coreglib "github.com/diamondburned/gotk4/pkg/core/glib"
	"github.com/diamondburned/gotk4/pkg/glib/v2"
)

// #cgo pkg-config: gobject-2.0
// #include <stdlib.h>
// #include <glib.h>
import "C"

// NewContentProviderForBytes: create a content provider that provides the given
// bytes as data for the given mime_type.
//
// The function takes the following parameters:
//
//    - mimeType: mime type.
//    - bytes: GBytes with the data for mime_type.
//
// The function returns the following values:
//
//    - contentProvider: new GdkContentProvider.
//
func NewContentProviderForBytes(mimeType string, bytes *glib.Bytes) *ContentProvider {
	var args [2]girepository.Argument
	var _arg0 *C.void // out
	var _arg1 *C.void // out
	var _cret *C.void // in

	_arg0 = (*C.void)(unsafe.Pointer(C.CString(mimeType)))
	defer C.free(unsafe.Pointer(_arg0))
	_arg1 = (*C.void)(gextras.StructNative(unsafe.Pointer(bytes)))
	*(*string)(unsafe.Pointer(&args[0])) = _arg0
	*(**glib.Bytes)(unsafe.Pointer(&args[1])) = _arg1

	_gret := girepository.MustFind("Gdk", "ContentProvider").InvokeMethod("new_ContentProvider_for_bytes", args[:], nil)
	_cret = *(**C.void)(unsafe.Pointer(&_gret))

	runtime.KeepAlive(mimeType)
	runtime.KeepAlive(bytes)

	var _contentProvider *ContentProvider // out

	_contentProvider = wrapContentProvider(coreglib.AssumeOwnership(unsafe.Pointer(_cret)))

	return _contentProvider
}

// NewContentProviderForValue: create a content provider that provides the given
// value.
//
// The function takes the following parameters:
//
//    - value: GValue.
//
// The function returns the following values:
//
//    - contentProvider: new GdkContentProvider.
//
func NewContentProviderForValue(value *coreglib.Value) *ContentProvider {
	var args [1]girepository.Argument
	var _arg0 *C.void // out
	var _cret *C.void // in

	_arg0 = (*C.void)(unsafe.Pointer(value.Native()))
	*(**coreglib.Value)(unsafe.Pointer(&args[0])) = _arg0

	_gret := girepository.MustFind("Gdk", "ContentProvider").InvokeMethod("new_ContentProvider_for_value", args[:], nil)
	_cret = *(**C.void)(unsafe.Pointer(&_gret))

	runtime.KeepAlive(value)

	var _contentProvider *ContentProvider // out

	_contentProvider = wrapContentProvider(coreglib.AssumeOwnership(unsafe.Pointer(_cret)))

	return _contentProvider
}

// NewContentProviderUnion creates a content provider that represents all the
// given providers.
//
// Whenever data needs to be written, the union provider will try the given
// providers in the given order and the first one supporting a format will be
// chosen to provide it.
//
// This allows an easy way to support providing data in different formats. For
// example, an image may be provided by its file and by the image contents with
// a call such as
//
//    gdk_content_provider_new_union ((GdkContentProvider *[2]) {
//                                      gdk_content_provider_new_typed (G_TYPE_FILE, file),
//                                      gdk_content_provider_new_typed (G_TYPE_TEXTURE, texture)
//                                    }, 2);.
//
// The function takes the following parameters:
//
//    - providers (optional): The ContentProviders to present the union of.
//
// The function returns the following values:
//
//    - contentProvider: new GdkContentProvider.
//
func NewContentProviderUnion(providers []*ContentProvider) *ContentProvider {
	var args [2]girepository.Argument
	var _arg0 **C.void // out
	var _arg1 C.gsize
	var _cret *C.void // in

	if providers != nil {
		_arg1 = (C.gsize)(len(providers))
		_arg0 = (**C.void)(C.calloc(C.size_t(len(providers)), C.size_t(unsafe.Sizeof(uint(0)))))
		{
			out := unsafe.Slice((**C.void)(_arg0), len(providers))
			for i := range providers {
				out[i] = (*C.void)(unsafe.Pointer(coreglib.InternObject(providers[i]).Native()))
				C.g_object_ref(C.gpointer(coreglib.InternObject(providers[i]).Native()))
			}
		}
	}
	*(*[]*ContentProvider)(unsafe.Pointer(&args[0])) = _arg0

	_gret := girepository.MustFind("Gdk", "ContentProvider").InvokeMethod("new_ContentProvider_union", args[:], nil)
	_cret = *(**C.void)(unsafe.Pointer(&_gret))

	runtime.KeepAlive(providers)

	var _contentProvider *ContentProvider // out
	_out1 = *(**ContentProvider)(unsafe.Pointer(&outs[1]))

	_contentProvider = wrapContentProvider(coreglib.AssumeOwnership(unsafe.Pointer(_cret)))

	return _contentProvider
}
